/*!
 * jquery.fn.banner
 * @author ydr.me
 * @version 1.1
 */
(function(f,i,c){var k,h="jquery-banner____",a=f(i).width(),j=0,g=[],d={width:"auto",duration:678,delay:5000,autoPlay:true,direction:"right",contentSelector:".content",onbeforechange:function(){},onafterchange:function(){}};f.fn.banner=function(){var m=arguments,n=m.length;return this.each(function(){var r=f(this),q=b(r,"hasInit")||0;if(f.isNumeric(m[0])||m[0]=="prev"||m[0]=="next"){v(m[0]);}else{if(m[0]=="play"){t();}else{if(m[0]=="pause"){p();}else{if(!q){u();}}}}function u(){var H=f.extend({},d,m[0]),y=H.contentSelector?f(H.contentSelector,r):null,E=y.children(),B=b(r,"displayIndex")||0,w=y.width(),D=E.length,x=0,C,F,z,A,G;if(!y.length){return;}if(D<2){return;}C=E.first();F=E.last();C.clone(true).insertAfter(F);F.clone(true).insertBefore(C);g.push(r);b(r,"hasInit",1);b(r,"options",H);b(r,"$content",y);b(r,"displayIndex",B);b(r,"lastItemIndex",0);b(r,"count",D);b(r,"translateX",0);b(r,"transitionTimer",0);b(r,"delayTimer",0);y.wrap('<div class="clearfix" style="overflow:hidden;position:relative;"></div>').css({width:(D+2)+"00%"});A=y.parent();G=f('<div style="width:100%;height:0;top:0;left:0;right:0;"></div>').insertAfter(A);b(r,"$testWidth",G);x=G.width();if(H.width==="auto"){H.fitWidth=w;}else{H.fitWidth=H.width;}if(x<H.fitWidth){H.fitWidth=x;}A.width(x);E=y.children();E.width(100/(D+2)+"%").css({overflow:"hidden",display:"block","float":"left",padding:0,margin:0});o(1);if(f.fn.swipe){y.swipe({onswipestart:function(){p();z=b(r,"translateX");},onswipemove:function(M,I,N){var K=b(r,"count"),L=e(r,K+1),J;if(I>N){if(z+I<L){J=L;}else{if(z+I>0){J=0;}else{J=z+I;}}b(r,"translateX",J);y.css("transform","translateX("+J+"px)");return false;}},onswipecancel:function(){if(H.autoPlay){t();}y.css("transform","translateX("+z+"px)");return false;},onswipeend:function(){if(H.autoPlay){t();}return false;},onswipeleft:function(){v("next",true);return false;},onswiperight:function(){v("prev",true);return false;}});}r.mouseenter(function(){p();}).mouseleave(function(){if(H.autoPlay){t();}});if(H.autoPlay){t();}}function t(){var x=b(r,"options"),w=b(r,"delayTimer");p();w=setInterval(function(){var y=b(r,"displayIndex");v(x.direction=="right"?"next":"prev");},x.delay);b(r,"delayTimer",w);}function p(){var x=b(r,"$content"),w=b(r,"delayTimer");if(w){clearInterval(w);b(r,"delayTimer",0);}}function v(z,A){var x=b(r,"options"),y=b(r,"count"),w=b(r,"displayIndex"),B=0;b(r,"lastItemIndex",-1);if(z=="prev"){if(w==0){b(r,"lastItemIndex",y+1);w=y-1;}else{w--;}}else{if(z=="next"){if(w==y-1){b(r,"lastItemIndex",0);w=0;}else{w++;}}else{w=z;}}x.onbeforechange.call(r[0],w);s(w,z=="prev",A);}function s(F,z,C){var x=b(r,"$content"),H=b(r,"$items"),G=b(r,"count"),I=b(r,"lastItemIndex")*1,E=b(r,"transitionTimer"),K=b(r,"options"),w=F+1,B=e(r,w),A=b(r,"translateX"),J=0,D=e(r,1),y=e(r,G);if(C){console.log(J);console.log(B);if(A>D){J=y-(K.fitWidth-(A-D));}else{if(A<y){J=D-(y-A)+K.fitWidth;}}if(J!=0){x.css("transform","translateX("+J+"px)");}}else{if(I>=0){o(I);}}setTimeout(function(){x.css({transform:"translateX("+B+"px)","transition-duration":K.duration+"ms"});b(r,"displayIndex",F);K.onafterchange.call(r[0],F);},1);E=setTimeout(function(){o(w);},K.duration);b(r,"transitionTimer",E);}function o(x){var w=b(r,"$content"),y=b(r,"transitionTimer"),z=e(r,x);if(y){clearTimeout(y);b(r,"transitionTimer",0);}w.css({transform:"translateX("+z+"px)","transition-duration":"0"});b(r,"translateX",z);}});};f(i).resize(function(){if(j){clearTimeout(j);j=0;}j=setTimeout(function(){var m=f(i).width();if(a!=m){l();a=m;}},123);});function b(n,o,m){if(m===c){return n.data(h+o);}else{return n.data(h+o,m);}}function l(){f.each(g,function(q,r){var p=b(r,"options"),o=b(r,"$content"),n=b(r,"$testWidth"),t=b(r,"count"),m=b(r,"displayIndex"),s=n.width();if(p.width!="auto"&&p.width<s){s=p.width;}o.parent().width(s);p.fitWidth=s;b(r,"options",p);o.css("transform","translateX("+e(r,m+1)+"px)");});}function e(n,o){var m=b(n,"options");return -o*m.fitWidth;}f.fn.banner.defaults=d;})($,this);
